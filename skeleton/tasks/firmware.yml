---
- name: Install firmware
  pkgng:
    name:
      - cpu-microcode
      - drm-kmod
      - gpu-firmware-kmod
      - wifi-firmware-kmod
    state: present
  tags: ['pkg', 'firmware']

- name: Configure /etc/rc.conf for firmware
  lineinfile:
    path: /etc/rc.conf
    line: "{{ item.line }}"
  loop:
    # Also valid: amdgpu radeonkms
    - line: kld_list="i915kms"
  tags: ['firmware']
